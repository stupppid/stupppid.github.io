{"version":3,"sources":["pages/lifegame/index.js"],"names":["initPersons","a","b","p","auto","t","stop","wd","theWorld","isOver","arr","getMatrix","i","j","stopGo","document","getElementById","innerText","continueGo","setTimeout","setWorld","initTable","innerHTML","uel","createElement","setAttribute","el","appendChild","style","width","clearWorld","setDead","changeLife","onEdge","setAlive","selectAliveByArray","length","autoSelectAlive","none","newLine","push","Math","random","getElementsByClassName","children","tmparr","parseInt","addEventListener","e","cancelBubble","preventDefault","buttons","target","className","startsWith","parentNode","value","at","bt","rl","styleSheets","cssRules","selectorText","transition","JSON","parse","querySelector","module","exports"],"mappings":"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","file":"lifegame.5be39131.js","sourceRoot":"..","sourcesContent":["function initPersons (a, b, p, auto, t) {\r\n  var stop = true\r\n  var theWorld = {\r\n    isOver: false,\r\n    arr: [],\r\n    getMatrix: function (i, j) {\r\n      return this.arr[i - 1][j - 1] + this.arr[i - 1][j] + this.arr[i - 1][j + 1] +\r\n        this.arr[i][j - 1] + this.arr[i][j + 1] +\r\n        this.arr[i + 1][j - 1] + this.arr[i + 1][j] + this.arr[i + 1][j + 1]\r\n    }\r\n  }\r\n  function stopGo () {\r\n    stop = true\r\n    document.getElementById('start').innerText = '开始'\r\n  }\r\n  function continueGo () {\r\n    stop = false\r\n    document.getElementById('start').innerText = '暂停'\r\n    setTimeout(setWorld, t)\r\n  }\r\n  function initTable () {\r\n    var wd = document.getElementById('wd')\r\n    wd.innerHTML = null\r\n    for (var i = 0; i < b + 2; i++) {\r\n      var uel = document.createElement('div')\r\n      uel.setAttribute('class', 'uel')\r\n      for (var j = 0; j < a + 2; j++) {\r\n        var el = document.createElement('i')\r\n        el.setAttribute('class', 'el')\r\n        uel.appendChild(el)\r\n      }\r\n      wd.appendChild(uel)\r\n    }\r\n    wd.style.width = (a + 2) * 15 + 'px'\r\n    a += 1; b += 1\r\n  }\r\n  function clearWorld () {\r\n    for (var i in theWorld.arr) {\r\n      for (var j in theWorld.arr[i]) {\r\n        setDead(i, j)\r\n      }\r\n    }\r\n  }\r\n  function changeLife (i, j) {\r\n    if (onEdge(i, j)) {\r\n      return\r\n    }\r\n    if (theWorld.arr[j][i]) {\r\n      setDead(j, i)\r\n    } else {\r\n      setAlive(j, i)\r\n    }\r\n  }\r\n  function addEvent () {\r\n    var wd = document.getElementById('wd')\r\n    wd.addEventListener('mouseover', function (e) {\r\n      e.cancelBubble = true\r\n      e.preventDefault()\r\n      if (e.buttons == 0) {\r\n        return\r\n      }\r\n      if (!e.target.className.startsWith('el')) {\r\n        return\r\n      }\r\n      for (var i in e.target.parentNode.children) {\r\n        if (e.target.parentNode.children[i] == e.target) {\r\n          break\r\n        }\r\n      }\r\n      for (var j = 0; j < wd.children.length; j++) {\r\n        if (wd.children[j] == e.target.parentNode) {\r\n          break\r\n        }\r\n      }\r\n      changeLife(i, j)\r\n    })\r\n    wd.addEventListener('click', function (e) {\r\n      e.cancelBubble = true\r\n      e.preventDefault()\r\n      for (var i in e.target.parentNode.children) {\r\n        if (e.target.parentNode.children[i] == e.target) {\r\n          break\r\n        }\r\n      }\r\n      for (var j = 0; j < wd.children.length; j++) {\r\n        if (wd.children[j] == e.target.parentNode) {\r\n          break\r\n        }\r\n      }\r\n      changeLife(i, j)\r\n    })\r\n    document.getElementById('rand').addEventListener('click', function () {\r\n      autoSelectAlive(false)\r\n    })\r\n    document.getElementById('clear').addEventListener('click', function () {\r\n      stopGo()\r\n      clearWorld()\r\n    })\r\n    document.getElementById('start').addEventListener('click', function () {\r\n      t = document.getElementById('time').value || 0\r\n      if (document.getElementById('a').value != a || document.getElementById('b').value != b) {\r\n        var at = parseInt(document.getElementById('a').value) || 20\r\n        var bt = parseInt(document.getElementById('b').value) || 20\r\n        if (at != a - 1 || bt != b - 1) {\r\n          a = at\r\n          b = bt\r\n          initTable()\r\n          autoSelectAlive(true)\r\n        }\r\n      }\r\n      p = document.getElementById('p').value || 0.3\r\n      if (stop) {\r\n        continueGo()\r\n      } else {\r\n        stopGo()\r\n      }\r\n    })\r\n    document.getElementById('slider').addEventListener('click', function () {\r\n      stopGo()\r\n      var arr = [[0, 0, 1], [1, 0, 1], [0, 1, 1]]\r\n      selectAliveByArray(arr)\r\n    })\r\n    document.getElementById('shadow').addEventListener('click', function () {\r\n      var rl = document.styleSheets[0].cssRules\r\n      for (var i in rl) {\r\n        if (rl[i].selectorText == '.el') {\r\n          if (rl[i].style.transition) {\r\n            rl[i].style.transition = null\r\n          } else {\r\n            rl[i].style.transition = 'background-color ease-in-out 200ms'\r\n          }\r\n        }\r\n      }\r\n    })\r\n    document.getElementById('useInitStatus').addEventListener('click', function () {\r\n      stopGo()\r\n      var arr = JSON.parse(document.querySelector('#initStatus').value)\r\n      selectAliveByArray(arr)\r\n    })\r\n  }\r\n  function onEdge (i, j) {\r\n    return i == 0 || j == 0 || j == a || i == b\r\n  }\r\n  function selectAliveByArray (arr) {\r\n    clearWorld()\r\n    for (var i = 0; i < arr.length; i++) {\r\n      for (var j = 0; j < arr[i].length; j++) {\r\n        if (arr[i][j]) {\r\n          setAlive(i + 1, j + 1)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  function autoSelectAlive (none) {\r\n    var uel = document.getElementById('uel')\r\n    theWorld.arr = []\r\n    for (var i = 0; i < b + 1; i++) {\r\n      var newLine = []\r\n      theWorld.arr.push(newLine)\r\n      for (var j = 0; j < a + 1; j++) {\r\n        if (onEdge(i, j) || none) {\r\n          newLine.push(false)\r\n          continue\r\n        }\r\n        if (Math.random() < p) {\r\n          newLine.push(true)\r\n          document.getElementsByClassName('uel')[i].children[j].setAttribute('class', 'el alive')\r\n        } else {\r\n          newLine.push(false)\r\n          document.getElementsByClassName('uel')[i].children[j].setAttribute('class', 'el')\r\n        }\r\n      }\r\n    }\r\n  }\r\n  function setAlive (i, j) {\r\n    theWorld.arr[i][j] = true\r\n    document.getElementsByClassName('uel')[i].children[j].setAttribute('class', 'el alive')\r\n  }\r\n  function setDead (i, j) {\r\n    theWorld.arr[i][j] = false\r\n    document.getElementsByClassName('uel')[i].children[j].setAttribute('class', 'el')\r\n  }\r\n  function setWorld () {\r\n    var tmparr = []\r\n    for (var i in theWorld.arr) {\r\n      var arr2 = []\r\n      tmparr.push(arr2)\r\n      if (i == 0 || i == theWorld.arr.length - 1) {\r\n        continue\r\n      }\r\n      for (var j in theWorld.arr[i]) {\r\n        if (j == 0 || j == theWorld.arr[i].length - 1) {\r\n          continue\r\n        }\r\n        i = parseInt(i)\r\n        j = parseInt(j)\r\n        if (theWorld.getMatrix(i, j) == 2) {\r\n          tmparr[i][j] = theWorld.arr[i][j]\r\n        } else {\r\n          tmparr[i][j] = theWorld.getMatrix(i, j) == 3 | false\r\n        }\r\n      }\r\n    }\r\n    for (var i in theWorld.arr) {\r\n      for (var j in theWorld.arr[i]) {\r\n        theWorld.arr[i][j] = tmparr[i][j]\r\n        if (tmparr[i][j]) {\r\n          setAlive(i, j)\r\n        } else {\r\n          setDead(i, j)\r\n        }\r\n      }\r\n    }\r\n    if (!stop) { setTimeout(setWorld, t) }\r\n  }\r\n  initTable()\r\n  addEvent()\r\n  if (auto) {\r\n    continueGo()\r\n    autoSelectAlive() // true是全部都死掉\r\n    setTimeout(setWorld, t)\r\n  } else {\r\n    autoSelectAlive(true)\r\n  }\r\n}\r\n\r\nmodule.exports = () => initPersons(20, 20, 0.3, true, 100)\r\n"]}